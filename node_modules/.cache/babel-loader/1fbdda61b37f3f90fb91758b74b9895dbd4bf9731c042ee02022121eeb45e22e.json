{"ast":null,"code":"import _slicedToArray from\"E:/WebStorm/spacex-launches/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import Styles from\"./LaunchTable.module.css\";import Launch from\"../Launch/Launch\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LaunchTable=function LaunchTable(){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),launches=_useState4[0],setLaunches=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),currentPage=_useState6[0],setCurrentPage=_useState6[1];var _useState7=useState(10),_useState8=_slicedToArray(_useState7,1),launchesPerPage=_useState8[0];var _useState9=useState(1),_useState10=_slicedToArray(_useState9,2),maxPage=_useState10[0],setMaxPage=_useState10[1];var _useState11=useState(\"date_utc\"),_useState12=_slicedToArray(_useState11,2),sortKey=_useState12[0],setSortKey=_useState12[1];var _useState13=useState(\"asc\"),_useState14=_slicedToArray(_useState13,2),sortOrder=_useState14[0],setSortOrder=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),filterText=_useState16[0],setFilterText=_useState16[1];useEffect(function(){setLoading(true);axios.get(\"https://api.spacexdata.com/v4/launches\").then(function(response){var data=response.data;setMaxPage(Math.ceil(response.data.length/launchesPerPage));var updatedLaunches=data.map(function(launch){var favoriteStatus=localStorage.getItem(\"favorite_\".concat(launch.id));if(favoriteStatus){launch.isFavorite=JSON.parse(favoriteStatus);}else{launch.isFavorite=false;}return launch;});setLaunches(updatedLaunches);}).catch(function(error){console.error(\"Error fetching data:\",error);}).finally(function(){return setLoading(false);});},[launchesPerPage]);function handleNextPage(e){e.preventDefault();if(currentPage===maxPage)return;setCurrentPage(function(){return currentPage+1;});}function handlePreviousPage(e){e.preventDefault();if(currentPage<=1)return;setCurrentPage(function(){return currentPage-1;});}var indexOfLastLaunch=currentPage*launchesPerPage;var indexOfFirstLaunch=indexOfLastLaunch-launchesPerPage;var currentLaunches=launches.slice(indexOfFirstLaunch,indexOfLastLaunch);var sortedLaunches=currentLaunches.sort(function(a,b){var aValue=a[sortKey];var bValue=b[sortKey];if(aValue<bValue){return sortOrder===\"asc\"?-1:1;}if(aValue>bValue){return sortOrder===\"asc\"?1:-1;}return 0;}).filter(function(launch){return launch.name.toLowerCase().includes(filterText.toLowerCase());});var handleSort=function handleSort(key){if(key===sortKey){setSortOrder(sortOrder===\"asc\"?\"desc\":\"asc\");}else{setSortKey(key);setSortOrder(\"asc\");}};if(loading)return;return/*#__PURE__*/_jsxs(\"div\",{className:Styles.MainWrap,children:[/*#__PURE__*/_jsx(\"input\",{className:Styles.SortInput,type:\"text\",placeholder:\"Type something to filter by launch name\",value:filterText,onChange:function onChange(e){return setFilterText(e.target.value);}}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return handleSort(\"name\");},children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Flight number\"}),/*#__PURE__*/_jsx(\"th\",{onClick:function onClick(){return handleSort(\"date_utc\");},children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Rocket Image\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Toggle favorite\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:launches.length?/*#__PURE__*/_jsx(Launch,{launches:launches,setLaunchesFunc:setLaunches,sortedLaunches:sortedLaunches}):null})]}),/*#__PURE__*/_jsxs(\"div\",{className:Styles.ButtonWrap,children:[/*#__PURE__*/_jsx(\"button\",{className:Styles.Button,onClick:handlePreviousPage,children:\"Previous\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Page \".concat(currentPage)}),/*#__PURE__*/_jsx(\"button\",{className:Styles.Button,onClick:handleNextPage,children:\"Next\"})]})]});};export default LaunchTable;","map":{"version":3,"names":["React","useState","useEffect","axios","Styles","Launch","jsx","_jsx","jsxs","_jsxs","LaunchTable","_useState","_useState2","_slicedToArray","loading","setLoading","_useState3","_useState4","launches","setLaunches","_useState5","_useState6","currentPage","setCurrentPage","_useState7","_useState8","launchesPerPage","_useState9","_useState10","maxPage","setMaxPage","_useState11","_useState12","sortKey","setSortKey","_useState13","_useState14","sortOrder","setSortOrder","_useState15","_useState16","filterText","setFilterText","get","then","response","data","Math","ceil","length","updatedLaunches","map","launch","favoriteStatus","localStorage","getItem","concat","id","isFavorite","JSON","parse","catch","error","console","finally","handleNextPage","e","preventDefault","handlePreviousPage","indexOfLastLaunch","indexOfFirstLaunch","currentLaunches","slice","sortedLaunches","sort","a","b","aValue","bValue","filter","name","toLowerCase","includes","handleSort","key","className","MainWrap","children","SortInput","type","placeholder","value","onChange","target","onClick","setLaunchesFunc","ButtonWrap","Button"],"sources":["E:/WebStorm/spacex-launches/src/components/LaunchTable/LaunchTable.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport Styles from \"./LaunchTable.module.css\";\r\nimport Launch from \"../Launch/Launch\";\r\n\r\nconst LaunchTable = () => {\r\n  const [loading, setLoading] = useState(true);\r\n  const [launches, setLaunches] = useState([]);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [launchesPerPage] = useState(10);\r\n  const [maxPage, setMaxPage] = useState(1);\r\n  const [sortKey, setSortKey] = useState(\"date_utc\");\r\n  const [sortOrder, setSortOrder] = useState(\"asc\");\r\n  const [filterText, setFilterText] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    axios\r\n      .get(\"https://api.spacexdata.com/v4/launches\")\r\n      .then((response) => {\r\n        const data = response.data;\r\n        setMaxPage(Math.ceil(response.data.length / launchesPerPage));\r\n\r\n        const updatedLaunches = data.map((launch) => {\r\n          const favoriteStatus = localStorage.getItem(`favorite_${launch.id}`);\r\n          if (favoriteStatus) {\r\n            launch.isFavorite = JSON.parse(favoriteStatus);\r\n          } else {\r\n            launch.isFavorite = false;\r\n          }\r\n          return launch;\r\n        });\r\n        setLaunches(updatedLaunches);\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Error fetching data:\", error);\r\n      })\r\n      .finally(() => setLoading(false));\r\n  }, [launchesPerPage]);\r\n\r\n  function handleNextPage(e) {\r\n    e.preventDefault();\r\n    if (currentPage === maxPage) return;\r\n    setCurrentPage(() => currentPage + 1);\r\n  }\r\n\r\n  function handlePreviousPage(e) {\r\n    e.preventDefault();\r\n    if (currentPage <= 1) return;\r\n    setCurrentPage(() => currentPage - 1);\r\n  }\r\n\r\n  const indexOfLastLaunch = currentPage * launchesPerPage;\r\n  const indexOfFirstLaunch = indexOfLastLaunch - launchesPerPage;\r\n  const currentLaunches = launches.slice(indexOfFirstLaunch, indexOfLastLaunch);\r\n\r\n  const sortedLaunches = currentLaunches\r\n    .sort((a, b) => {\r\n      const aValue = a[sortKey];\r\n      const bValue = b[sortKey];\r\n\r\n      if (aValue < bValue) {\r\n        return sortOrder === \"asc\" ? -1 : 1;\r\n      }\r\n      if (aValue > bValue) {\r\n        return sortOrder === \"asc\" ? 1 : -1;\r\n      }\r\n      return 0;\r\n    })\r\n    .filter((launch) =>\r\n      launch.name.toLowerCase().includes(filterText.toLowerCase())\r\n    );\r\n\r\n  const handleSort = (key) => {\r\n    if (key === sortKey) {\r\n      setSortOrder(sortOrder === \"asc\" ? \"desc\" : \"asc\");\r\n    } else {\r\n      setSortKey(key);\r\n      setSortOrder(\"asc\");\r\n    }\r\n  };\r\n\r\n  if (loading) return;\r\n\r\n  return (\r\n    <div className={Styles.MainWrap}>\r\n      <input\r\n        className={Styles.SortInput}\r\n        type=\"text\"\r\n        placeholder=\"Type something to filter by launch name\"\r\n        value={filterText}\r\n        onChange={(e) => setFilterText(e.target.value)}\r\n      />\r\n\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th onClick={() => handleSort(\"name\")}>Name</th>\r\n            <th>Flight number</th>\r\n            <th onClick={() => handleSort(\"date_utc\")}>Date</th>\r\n            <th>Rocket Image</th>\r\n            <th>Toggle favorite</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {launches.length ? (\r\n            <Launch\r\n              launches={launches}\r\n              setLaunchesFunc={setLaunches}\r\n              sortedLaunches={sortedLaunches}\r\n            />\r\n          ) : null}\r\n        </tbody>\r\n      </table>\r\n\r\n      <div className={Styles.ButtonWrap}>\r\n        <button className={Styles.Button} onClick={handlePreviousPage}>\r\n          Previous\r\n        </button>\r\n        <div>{`Page ${currentPage}`}</div>\r\n        <button className={Styles.Button} onClick={handleNextPage}>\r\n          Next\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LaunchTable;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}